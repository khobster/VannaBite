<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VANNA BITE</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Staatliches&display=swap');
        
        * { box-sizing: border-box; }
        
        body {
            font-family: 'Staatliches', cursive;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            background: linear-gradient(180deg, #1a1a2e 0%, #16213e 50%, #0f0f23 100%);
            padding: 20px;
            color: white;
            letter-spacing: 0.5px;
        }
        
        h1 {
            font-family: 'Staatliches', cursive;
            color: #ffd700;
            margin-bottom: 15px;
            text-align: center;
            font-size: 4rem;
            letter-spacing: 2px;
            text-shadow: 
                4px 4px 0px #8b6914,
                -1px -1px 0px #fff8dc;
        }
        
        .container { display: flex; flex-direction: column; align-items: center; max-width: 1000px; width: 100%; }
        .game-area { display: flex; align-items: center; justify-content: center; gap: 40px; width: 100%; }
        
        .vanna-container { 
            width: 300px; 
            height: 420px; 
            position: relative; 
            flex-shrink: 0;
            display: flex;
            align-items: flex-end;
            justify-content: center;
        }

        .vanna-img {
            width: auto;
            height: 100%;
            max-width: 100%;
            object-fit: contain;
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.6));
            transition: transform 0.1s; 
        }
        
        @keyframes animIdle { 
            0%, 100% { transform: scale(1); } 
            50% { transform: scale(1.02, 0.98); }
        }
        @keyframes animWatching { 
            0% { transform: translateX(0); } 
            25% { transform: translateX(-3px) rotate(-1deg); }
            75% { transform: translateX(3px) rotate(1deg); }
            100% { transform: translateX(0); }
        }
        @keyframes animWin { 
            0%, 100% { transform: translateY(0); } 
            50% { transform: translateY(-20px); } 
        }
        
        .vanna-container.idle .vanna-img { animation: animIdle 2s ease-in-out infinite; }
        .vanna-container.watching .vanna-img { animation: animWatching 0.1s linear infinite; }
        .vanna-container.win .vanna-img { animation: animWin 0.4s ease-in-out infinite; }
        
        /* === 1980s WHEEL OF FORTUNE === */
        .wheel-container { 
            position: relative; 
            width: 440px; 
            height: 440px; 
            margin: 20px 0; 
        }
        
        /* Gold outer rim */
        .wheel-outer-rim {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: linear-gradient(160deg, #d4a84b 0%, #c9952c 30%, #a67c00 50%, #c9952c 70%, #d4a84b 100%);
            box-shadow: 
                inset 0 0 0 4px #8b6914,
                inset 0 0 0 8px #d4a84b,
                0 8px 25px rgba(0,0,0,0.6);
        }
        
        /* The wheel with segments */
        .wheel {
            position: absolute;
            width: calc(100% - 24px);
            height: calc(100% - 24px);
            top: 12px;
            left: 12px;
            border-radius: 50%;
            overflow: hidden;
            transition: transform 5s cubic-bezier(0.17, 0.97, 0.12, 1);
        }
        
        .wheel svg {
            width: 100%;
            height: 100%;
        }
        
        /* Green center hub */
        .center-hub {
            position: absolute; 
            top: 50%; 
            left: 50%;
            transform: translate(-50%, -50%);
            width: 120px; 
            height: 120px;
            background: radial-gradient(circle at 40% 35%, #5dbe5d 0%, #3aa63a 40%, #2d8a2d 70%, #1f6b1f 100%);
            border-radius: 50%; 
            z-index: 10;
            cursor: pointer;
            display: flex; 
            align-items: center; 
            justify-content: center;
            color: #fff; 
            font-size: 22px;
            font-family: 'Staatliches', cursive;
            letter-spacing: 1px;
            text-shadow: 2px 2px 0px rgba(0,0,0,0.7);
            border: 4px solid #2d7a2d;
            box-shadow: 
                inset 0 3px 10px rgba(255,255,255,0.3),
                inset 0 -5px 15px rgba(0,0,0,0.3),
                0 4px 10px rgba(0,0,0,0.4);
            transition: transform 0.2s;
        }
        
        .center-hub:hover { 
            transform: translate(-50%, -50%) scale(1.05);
        }
        
        /* Classic red flipper/pointer */
        .pointer {
            position: absolute; 
            top: -5px; 
            left: 50%; 
            transform: translateX(-50%);
            z-index: 15;
            width: 0;
            height: 0;
            border-left: 18px solid transparent;
            border-right: 18px solid transparent;
            border-top: 50px solid #cc0000;
            filter: drop-shadow(2px 3px 3px rgba(0,0,0,0.5));
        }
        
        .pointer::after {
            content: '';
            position: absolute;
            top: -50px;
            left: -13px;
            width: 0;
            height: 0;
            border-left: 13px solid transparent;
            border-right: 13px solid transparent;
            border-top: 42px solid #ff3333;
        }
        
        .controls { margin-top: 25px; display: flex; flex-direction: column; width: 100%; max-width: 420px; }
        .input-group { display: flex; margin-bottom: 15px; width: 100%; }
        
        input {
            flex-grow: 1; 
            padding: 14px 15px;
            border: 3px solid #d4a84b;
            border-radius: 0;
            margin-right: 10px; 
            font-size: 18px;
            font-family: 'Staatliches', cursive;
            background-color: #1a1a2e; 
            color: white;
            letter-spacing: 1px;
        }
        
        input::placeholder {
            color: #555;
        }
        
        button {
            padding: 14px 28px; 
            background: linear-gradient(180deg, #d4a84b 0%, #a67c00 100%);
            color: #1a1a00;
            border: 3px solid #8b6914; 
            border-radius: 0; 
            cursor: pointer;
            font-size: 20px; 
            font-family: 'Staatliches', cursive;
            letter-spacing: 1px;
        }
        button:hover { 
            background: linear-gradient(180deg, #e8c252 0%, #c9952c 100%);
        }
        
        .option-list {
            margin-top: 20px; 
            width: 100%;
            border: 3px solid #d4a84b;
            background: #1a1a2e;
        }
        .option-list h3 {
            text-align: center; 
            padding: 14px; 
            margin: 0;
            background: linear-gradient(180deg, #d4a84b 0%, #a67c00 100%);
            font-family: 'Staatliches', cursive;
            color: #1a1a00; 
            font-size: 1.5rem;
            letter-spacing: 2px;
        }
        .options-scroll {
            max-height: 200px; 
            overflow-y: auto;
        }
        .option-item {
            display: flex; 
            justify-content: space-between; 
            align-items: center;
            padding: 10px 15px; 
            border-bottom: 1px solid #333;
        }
        .option-item span { 
            display: flex; 
            align-items: center; 
            gap: 12px;
            font-family: 'Staatliches', cursive;
            font-size: 18px;
            letter-spacing: 1px;
        }
        .color-dot { 
            width: 24px; 
            height: 24px; 
            border: 2px solid #000;
        }
        .delete-btn { 
            background: #cc0000;
            color: white; 
            padding: 6px 16px;
            border: 2px solid #990000;
            font-size: 16px;
            font-family: 'Staatliches', cursive;
        }
        
        .result {
            margin-top: 25px; 
            padding: 20px 50px;
            background: linear-gradient(180deg, #d4a84b 0%, #a67c00 100%);
            color: #1a1a00; 
            text-align: center; 
            font-size: 32px; 
            display: none;
            border: 4px solid #8b6914;
            font-family: 'Staatliches', cursive;
            letter-spacing: 2px;
            box-shadow: 0 6px 20px rgba(0,0,0,0.5);
        }
        
        #option-count {
            text-align: center;
            padding: 8px;
            color: #888;
            font-size: 16px;
            letter-spacing: 2px;
            font-family: 'Staatliches', cursive;
        }
        
        @media (max-width: 800px) {
            .game-area { flex-direction: column; }
            .vanna-container { width: 220px; height: 320px; }
            .wheel-container { width: 340px; height: 340px; }
            .center-hub { width: 90px; height: 90px; font-size: 16px; }
            h1 { font-size: 2.8rem; letter-spacing: 2px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>VANNA BITE</h1>
        
        <div class="game-area">
            <div class="vanna-container idle" id="vanna-container">
                <img id="vanna-img" src="vanna_bite_idle.png" class="vanna-img" alt="Vanna">
            </div>
            
            <div class="wheel-container">
                <div class="wheel-outer-rim"></div>
                <div class="wheel" id="wheel"></div>
                <div class="center-hub" id="spinner">SPIN!</div>
                <div class="pointer"></div>
            </div>
        </div>
        
        <div class="result" id="result"></div>
        
        <div class="controls">
            <div class="input-group">
                <input type="text" id="new-option" placeholder="ADD DINNER OPTION...">
                <button id="add-btn">ADD</button>
            </div>
            <div class="option-list">
                <h3>DINNER OPTIONS</h3>
                <div id="option-count"></div>
                <div class="options-scroll">
                    <div id="options-list"></div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        let dinnerOptions = ["PIZZA", "TACOS", "PASTA", "BURGERS", "CHINESE", "SUSHI", "BBQ", "SALAD"];
        let wheelColors = [];
        let blackSliceIndex = 0;

        // EQUIDISTANT HUE COLOR GENERATION
        function generateWheelColors(count) {
            if (count === 0) return [];
            
            const colors = [];
            const colorCount = count - 1;
            const step = 360 / Math.max(colorCount, 1);
            
            blackSliceIndex = Math.floor(count / 2);
            
            let hueIndex = 0;
            for (let i = 0; i < count; i++) {
                if (i === blackSliceIndex) {
                    colors.push({ bg: '#111111' });
                } else {
                    const hue = Math.floor(hueIndex * step);
                    colors.push({ bg: `hsl(${hue}, 80%, 50%)` });
                    hueIndex++;
                }
            }
            return colors;
        }
        
        const wheel = document.getElementById('wheel');
        const vannaContainer = document.getElementById('vanna-container');
        const vannaImg = document.getElementById('vanna-img');
        const resultDiv = document.getElementById('result');
        
        function updateVanna(state) {
            vannaContainer.classList.remove('idle', 'watching', 'win');
            vannaContainer.classList.add(state);
            
            if (state === 'idle') vannaImg.src = 'vanna_bite_idle.png';
            if (state === 'watching') vannaImg.src = 'vanna_bite_watching.png';
            if (state === 'win') vannaImg.src = 'vanna_bite_winning.png';
        }
        
        function createWheel() {
            const n = dinnerOptions.length;
            if (n === 0) { 
                wheel.innerHTML = '<div style="width:100%;height:100%;background:#333;border-radius:50%;"></div>';
                wheelColors = [];
                return; 
            }
            
            wheelColors = generateWheelColors(n);
            const sliceAngle = 360 / n;
            const size = 416;
            const cx = size / 2;
            const cy = size / 2;
            const radius = size / 2;
            const innerRadius = 65;
            
            let svgContent = `<svg width="${size}" height="${size}" viewBox="0 0 ${size} ${size}">`;
            
            // Draw all segments
            for (let i = 0; i < n; i++) {
                const startAngle = (i * sliceAngle - 90) * Math.PI / 180;
                const endAngle = ((i + 1) * sliceAngle - 90) * Math.PI / 180;
                
                const x1 = cx + radius * Math.cos(startAngle);
                const y1 = cy + radius * Math.sin(startAngle);
                const x2 = cx + radius * Math.cos(endAngle);
                const y2 = cy + radius * Math.sin(endAngle);
                
                const largeArc = sliceAngle > 180 ? 1 : 0;
                
                const pathD = `M ${cx} ${cy} L ${x1} ${y1} A ${radius} ${radius} 0 ${largeArc} 1 ${x2} ${y2} Z`;
                svgContent += `<path d="${pathD}" fill="${wheelColors[i].bg}" stroke="#222" stroke-width="1"/>`;
            }
            
            // Draw gold divider lines
            for (let i = 0; i < n; i++) {
                const angle = (i * sliceAngle - 90) * Math.PI / 180;
                const x1 = cx + innerRadius * Math.cos(angle);
                const y1 = cy + innerRadius * Math.sin(angle);
                const x2 = cx + radius * Math.cos(angle);
                const y2 = cy + radius * Math.sin(angle);
                svgContent += `<line x1="${x1}" y1="${y1}" x2="${x2}" y2="${y2}" stroke="#a67c00" stroke-width="3"/>`;
            }
            
            // Draw text - WHITE with heavy BLACK stroke
            for (let i = 0; i < n; i++) {
                const midAngleDeg = (i + 0.5) * sliceAngle;
                const midAngle = (midAngleDeg - 90) * Math.PI / 180;
                const text = dinnerOptions[i].toUpperCase();
                
                const textRadius = radius - 22;
                const availableLength = textRadius - innerRadius - 10;
                const maxChars = Math.min(text.length, 8);
                // Tighter spacing between letters
                const letterHeight = Math.min(24, (availableLength / maxChars) * 0.92);
                
                for (let j = 0; j < maxChars; j++) {
                    const letterRadius = textRadius - (j * letterHeight);
                    if (letterRadius < innerRadius + 12) break;
                    
                    const lx = cx + letterRadius * Math.cos(midAngle);
                    const ly = cy + letterRadius * Math.sin(midAngle);
                    
                    const fontSize = Math.min(28, letterHeight + 6);
                    
                    // Heavy black drop shadow - offset down and right
                    svgContent += `<text 
                        x="${lx + 3}" 
                        y="${ly + 3}" 
                        font-family="Staatliches, Impact, sans-serif"
                        font-size="${fontSize}"
                        text-anchor="middle" 
                        dominant-baseline="middle"
                        fill="#000000"
                        transform="rotate(${midAngleDeg}, ${lx + 3}, ${ly + 3})"
                    >${text[j]}</text>`;
                    
                    // White text on top with black stroke
                    svgContent += `<text 
                        x="${lx}" 
                        y="${ly}" 
                        font-family="Staatliches, Impact, sans-serif"
                        font-size="${fontSize}"
                        text-anchor="middle" 
                        dominant-baseline="middle"
                        fill="#ffffff"
                        stroke="#000000"
                        stroke-width="2"
                        paint-order="stroke fill"
                        transform="rotate(${midAngleDeg}, ${lx}, ${ly})"
                    >${text[j]}</text>`;
                }
            }
            
            svgContent += '</svg>';
            wheel.innerHTML = svgContent;
        }
        
        function updateList() {
            const list = document.getElementById('options-list');
            list.innerHTML = '';
            document.getElementById('option-count').innerText = `${dinnerOptions.length} OPTIONS`;
            
            dinnerOptions.forEach((opt, i) => {
                const div = document.createElement('div');
                div.className = 'option-item';
                const color = wheelColors[i] ? wheelColors[i].bg : '#888';
                div.innerHTML = `
                    <span><div class="color-dot" style="background:${color}"></div>${opt.toUpperCase()}</span>
                    <button class="delete-btn" onclick="removeItem(${i})">X</button>
                `;
                list.appendChild(div);
            });
        }
        
        function removeItem(i) {
            dinnerOptions.splice(i, 1);
            save(); refresh();
        }
        
        function refresh() {
            createWheel();
            updateList();
        }
        
        function save() {
            localStorage.setItem('vannaBiteOptions', JSON.stringify(dinnerOptions));
        }

        let isSpinning = false;
        let currentRotation = 0;

        function spin() {
            if (isSpinning || dinnerOptions.length === 0) return;
            isSpinning = true;
            resultDiv.style.display = 'none';
            
            updateVanna('watching');
            
            const n = dinnerOptions.length;
            const sliceAngle = 360 / n;
            const winnerIndex = Math.floor(Math.random() * n);
            
            const targetRotation = 360 - (winnerIndex * sliceAngle + sliceAngle / 2);
            const extraSpins = 360 * (5 + Math.floor(Math.random() * 5));
            const totalRotation = currentRotation + extraSpins + (targetRotation - (currentRotation % 360));
            
            const finalRotation = totalRotation > currentRotation ? totalRotation : totalRotation + 360;
            currentRotation = finalRotation;
            
            wheel.style.transform = `rotate(${finalRotation}deg)`;
            
            setTimeout(() => {
                updateVanna('win');
                
                resultDiv.innerText = `DINNER: ${dinnerOptions[winnerIndex].toUpperCase()}!`;
                resultDiv.style.display = 'block';
                
                setTimeout(() => {
                    updateVanna('idle');
                    isSpinning = false;
                }, 4000);
            }, 5000);
        }

        document.getElementById('spinner').addEventListener('click', spin);
        document.getElementById('add-btn').addEventListener('click', () => {
            const val = document.getElementById('new-option').value.trim();
            if (val && !dinnerOptions.map(o => o.toUpperCase()).includes(val.toUpperCase())) {
                dinnerOptions.push(val.toUpperCase());
                document.getElementById('new-option').value = '';
                save(); refresh();
            }
        });
        
        document.getElementById('new-option').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                document.getElementById('add-btn').click();
            }
        });

        // Init
        const saved = localStorage.getItem('vannaBiteOptions');
        if (saved) dinnerOptions = JSON.parse(saved);
        refresh();
    </script>
</body>
</html>
